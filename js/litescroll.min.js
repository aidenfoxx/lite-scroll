/** 
 * Lite Scroll
 * 
 * @version    0.1
 * @author     Aiden Foxx
 * @license    MIT License 
 * @copyright  2015 Aiden Foxx
 * @link       http://github.com/aidenfoxx
 * @twitter    @furiousfoxx
 */
"use strict";function LiteScroll(t,e){if(!(this instanceof LiteScroll))return new LiteScroll(t,e);this.element=t,this.content=t.children[0],this.lockScroll=null,this.resizeTimeout=null,this.scrollEvent=null,this.x=0,this.y=0,this.scrollStartVec={x:0,y:0},this.prevScrollVec={x:0,y:0},this.options={scrollX:!1,scrollY:!0,snap:!1,snapSpeed:"300ms",dynamicResize:!0,lockScroll:!1};for(var i in e)this.options[i]=e[i];this.elementRect=this.element.getBoundingClientRect(),this.contentRect=this.content.getBoundingClientRect(),this.options.snap&&(this.childRect=this.getChildRect()),this.bindEvents()}LiteScroll.prototype.scrollStart=function(){},LiteScroll.prototype.scroll=function(){},LiteScroll.prototype.scrollEnd=function(){},LiteScroll.prototype.calcRelativePos=function(t,e){return{x:t-this.elementRect.left,y:e-this.elementRect.top}},LiteScroll.prototype.clacPointDistance=function(t,e){var i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)},LiteScroll.prototype.bindEvents=function(){this.element.addEventListener("mousedown",this._scrollStart.bind(this)),this.element.addEventListener("touchstart",this._scrollStart.bind(this)),window.addEventListener("mouseup",this._scrollEnd.bind(this)),window.addEventListener("touchend",this._scrollEnd.bind(this)),window.addEventListener("touchcancel",this._scrollEnd.bind(this)),this.options.dynamicResize&&window.addEventListener("resize",this.resize.bind(this))},LiteScroll.prototype.resize=function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.elementRect=this.element.getBoundingClientRect(),this.contentRect=this.content.getBoundingClientRect(),this.options.snap&&(this.content.style.transitionDuration="0ms",this.content.style.transform="translate(0px, 0px) translateZ(0px)",this.childRect=this.getChildRect()),this._scrollEnd()}.bind(this),500)},LiteScroll.prototype.getChildRect=function(){for(var t=[],e=0,i=this.content.children.length;i>e;e++)t.push(this.content.children[e].getBoundingClientRect());return t},LiteScroll.prototype._scrollStart=function(t){t.preventDefault(),this.scrollEvent||(this.scrollStartVec=this.calcRelativePos(t.changedTouches?t.changedTouches[0].pageX:t.pageX,t.changedTouches?t.changedTouches[0].pageY:t.pageY),this.scrollEvent=this._scroll.bind(this),this.element.addEventListener("mousemove",this.scrollEvent),this.element.addEventListener("touchmove",this.scrollEvent),this.scrollStart(t))},LiteScroll.prototype._scroll=function(t){t.preventDefault();var e=this.calcRelativePos(t.changedTouches?t.changedTouches[0].pageX:t.pageX,t.changedTouches?t.changedTouches[0].pageY:t.pageY),i=e.x-this.scrollStartVec.x,s=e.y-this.scrollStartVec.y;if(this.options.scrollX&&this.options.lockScroll&&(i>20||-20>i)&&20>s&&s>-20&&(this.lockScroll="x"),this.options.scrollY&&this.options.lockScroll&&(s>20||-20>s)&&20>i&&i>-20&&(this.lockScroll="y"),this.options.scrollX&&"y"!==this.lockScroll){var n=this.contentRect.width-this.elementRect.width,o=this.prevScrollVec.x+i;this.x=o>0||-n>o?o>0?0:-n:o}if(this.options.scrollY&&"x"!==this.lockScroll){var l=this.contentRect.height-this.elementRect.height,c=this.prevScrollVec.y+s;this.y=c>0||-l>c?c>0?0:-l:c}this.content.style.transitionDuration="0ms",this.content.style.transform="translate("+this.x+"px, "+this.y+"px) translateZ(0px)",this.scroll(t)},LiteScroll.prototype._scrollEnd=function(t){if(this.options.snap){for(var e=null,i={x:0,y:0},s=0,n=this.childRect.length;n>s;s++){var o=this.calcRelativePos(this.childRect[s].left,this.childRect[s].top);o.x=-o.x,o.y=-o.y;var l=this.clacPointDistance(this,o);s?e>l&&(e=l,i=o):(e=l,i=o)}this.x=i.x,this.y=i.y,this.content.style.transitionDuration=this.options.snapSpeed,this.content.style.transitionTimingFunction="cubic-bezier(0.1, 0.57, 0.1, 1)",this.content.style.transform="translate("+this.x+"px, "+this.y+"px) translateZ(0px)"}this.prevScrollVec.x=this.x,this.prevScrollVec.y=this.y,this.element.removeEventListener("mousemove",this.scrollEvent),this.element.removeEventListener("touchmove",this.scrollEvent),this.scrollEvent=null,this.scrollEnd(t)};