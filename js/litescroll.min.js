/** 
 * Lite Scroll
 * 
 * @version    0.3.2
 * @author     Aiden Foxx
 * @license    MIT License 
 * @copyright  2015 Aiden Foxx
 * @link       http://github.com/aidenfoxx
 * @twitter    @furiousfoxx
 */
function LiteScroll(a,b){if(!(this instanceof LiteScroll))return new LiteScroll(a,b);this.container=a;this.content=a.children[0];this.scrollFrame=this.scrollBegin=this.scrollEvent=this.scrollLock=this.scrollCallback=null;this.scrollInitVec={x:0,y:0};this.scrollInitMouseVec={x:0,y:0};this.resizeTimeout=null;this.y=this.x=0;this.options={scrollX:!1,scrollY:!0,snap:!1,snapSpeed:300,dynamicResize:!0,scrollLock:!0,scrollLockThreshold:20,momentum:!0,momentumFalloff:.006};for(var c in b)this.options[c]=
b[c];this.containerRect=this.container.getBoundingClientRect();this.contentRect=this.content.getBoundingClientRect();this.childRect=this.getChildRect();this.bindEvents()}LiteScroll.prototype.scrollStart=function(a){};LiteScroll.prototype.scroll=function(a){};LiteScroll.prototype.scrollEnd=function(a){};LiteScroll.prototype.calcRelativePos=function(a,b){return{x:a-this.containerRect.left,y:b-this.containerRect.top}};
LiteScroll.prototype.calcTouchCoords=function(a){return this.calcRelativePos(a.changedTouches?a.changedTouches[0].pageX:a.pageX,a.changedTouches?a.changedTouches[0].pageY:a.pageY)};LiteScroll.prototype.clacPointDistance=function(a,b){var c=b.x-a.x,d=b.y-a.y;return Math.sqrt(c*c+d*d)};
LiteScroll.prototype.getChildRect=function(){var a=[],b=this.content.style.transform;this.content.style.transitionDuration="0ms";this.content.style.transform="translate(0px, 0px)";for(var c=0,d=this.content.children.length;c<d;c++)a.push(this.content.children[c].getBoundingClientRect());this.content.style.transform=b;return a};
LiteScroll.prototype.bindEvents=function(){this.container.addEventListener("mousedown",this._scrollStart.bind(this));this.container.addEventListener("touchstart",this._scrollStart.bind(this));window.addEventListener("mouseup",this._scrollEnd.bind(this));window.addEventListener("touchend",this._scrollEnd.bind(this));window.addEventListener("touchcancel",this._scrollEnd.bind(this));this.options.dynamicResize&&window.addEventListener("resize",this.resize.bind(this))};
LiteScroll.prototype.resize=function(){clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){this.containerRect=this.container.getBoundingClientRect();this.contentRect=this.content.getBoundingClientRect();this.childRect=this.getChildRect()}.bind(this),500)};
LiteScroll.prototype.scrollTo=function(a,b,c,d,h){var e=!1;a=Math.round(a);b=Math.round(b);if(this.options.scrollX&&"y"!==this.scrollLock&&this.x!==a){var g=this.contentRect.width-this.containerRect.width;if(0<a||a<-g)e=this.x-a,a=0<a?0:-g,e=Math.abs(this.x-a)/Math.abs(e);this.x=a}if(this.options.scrollY&&"x"!==this.scrollLock&&this.y!==b){a=this.contentRect.height-this.containerRect.height;if(0<b||b<-a)g=this.y-b,b=0<b?0:-a,a=Math.abs(this.y-b)/Math.abs(g),e=!e||e>a?a:e;this.y=b}e&&(c*=e);this.content.style.transitionDuration=
c+"ms";this.content.style.transitionTimingFunction=d;this.content.style.transform="translate("+this.x+"px, "+this.y+"px) translateZ(0px)";clearTimeout(this.scrollCallback);h&&(this.scrollCallback=setTimeout(h.bind(this),c))};LiteScroll.prototype.snapTo=function(a,b,c,d){if(!this.childRect[a])return!1;a=this.calcRelativePos(this.childRect[a].left,this.childRect[a].top);this.scrollTo(-a.x,-a.y,0<=b?b:this.options.snapSpeed,c?c:"cubic-bezier(0.1, 0.55, 0.1, 1)",d)};
LiteScroll.prototype.snapToNearest=function(a,b,c){for(var d=null,h=0,e=0,g=this.childRect.length;e<g;e++){var f=this.calcRelativePos(this.childRect[e].left,this.childRect[e].top);f.x=-f.x;f.y=-f.y;f=this.clacPointDistance(this,f);if(!e||f<d)d=f,h=e}this.snapTo(h,a,b,c)};
LiteScroll.prototype._scrollStart=function(a){a.preventDefault();this.scrollEvent||(this.scrollBegin=Date.now(),this.scrollInitMouseVec=this.calcTouchCoords(a),this.scrollInitVec={x:this.x,y:this.y},this.scrollEvent=this._scroll.bind(this),this.container.addEventListener("mousemove",this.scrollEvent),this.container.addEventListener("touchmove",this.scrollEvent),this.scrollStart(a))};
LiteScroll.prototype._scroll=function(a){a.preventDefault();window.cancelAnimationFrame(this.scrollFrame);this.scrollFrame=window.requestAnimationFrame(function(){this._scrollFrame(a)}.bind(this))};
LiteScroll.prototype._scrollFrame=function(a){var b=this.calcTouchCoords(a),c=b.x-this.scrollInitMouseVec.x,b=b.y-this.scrollInitMouseVec.y;this.options.scrollLock&&!this.scrollLock&&(this.options.scrollX&&Math.abs(c)>this.options.scrollLockThreshold&&(this.scrollLock="x"),this.options.scrollY&&Math.abs(b)>this.options.scrollLockThreshold&&(this.scrollLock="y"));this.scrollTo(this.scrollInitVec.x+c,this.scrollInitVec.y+b,0,"linear");this.scroll(a)};
LiteScroll.prototype._scrollEnd=function(a){if(this.scrollEvent){window.cancelAnimationFrame(this.scrollFrame);if(this.options.momentum){var b=this.calcTouchCoords(a),c=Date.now()-this.scrollBegin,d=(b.x-this.scrollInitMouseVec.x)/c,b=(b.y-this.scrollInitMouseVec.y)/c;this.scrollTo(this.x+Math.abs(d)*d/(2*this.options.momentumFalloff),this.y+Math.abs(b)*b/(2*this.options.momentumFalloff),Math.abs("x"===this.scrollLock||Math.abs(d)>Math.abs(b)?d:b)/this.options.momentumFalloff,"cubic-bezier(0.165, 0.840, 0.440, 1.000)",
this.options.snap?this.snapToNearest:null)}else this.options.snap&&this.snapToNearest();this.container.removeEventListener("mousemove",this.scrollEvent);this.container.removeEventListener("touchmove",this.scrollEvent);this.scrollLock=this.scrollEvent=null;this.scrollEnd(a)}};