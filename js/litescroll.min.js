/** 
 * Lite Scroll
 * 
 * @version    0.1
 * @author     Aiden Foxx
 * @license    MIT License 
 * @copyright  2015 Aiden Foxx
 * @link       http://github.com/aidenfoxx
 * @twitter    @furiousfoxx
 */
"use strict";function LiteScroll(t,e){if(!(this instanceof LiteScroll))return new LiteScroll(t,e);this.element=t,this.content=t.children[0],this.elementRect=this.element.getBoundingClientRect(),this.contentRect=this.content.getBoundingClientRect(),this.resizeTimeout=null,this.scrollEvent=null,this.x=0,this.y=0,this.scrollStartVec={x:0,y:0},this.prevScrollVec={x:0,y:0},this.options={scrollX:!1,scrollY:!0,snap:!1,snapSpeed:"300ms",dynamicResize:!0};for(var i in e)this.options[i]=e[i];this.bindEvents()}LiteScroll.prototype.scrollStart=function(){},LiteScroll.prototype.scroll=function(){},LiteScroll.prototype.scrollEnd=function(){},LiteScroll.prototype.calcRelativePos=function(t,e){return{x:t-this.elementRect.left,y:e-this.elementRect.top}},LiteScroll.prototype.clacPointDistance=function(t,e){var i=e.x-t.x,s=e.y-t.y;return Math.sqrt(i*i+s*s)},LiteScroll.prototype.bindEvents=function(){this.element.addEventListener("mousedown",this._scrollStart.bind(this)),this.element.addEventListener("touchstart",this._scrollStart.bind(this)),window.addEventListener("mouseup",this._scrollEnd.bind(this)),window.addEventListener("touchend",this._scrollEnd.bind(this)),window.addEventListener("touchcancel",this._scrollEnd.bind(this)),this.options.dynamicResize&&window.addEventListener("resize",this.resize.bind(this))},LiteScroll.prototype.resize=function(){clearTimeout(this.resizeTimeout),this.resizeTimeout=setTimeout(function(){this.elementRect=this.element.getBoundingClientRect(),this.contentRect=this.content.getBoundingClientRect(),this._scrollEnd()}.bind(this),500)},LiteScroll.prototype._scrollStart=function(t){t.preventDefault(),this.scrollEvent||(this.scrollStartVec=this.calcRelativePos(t.changedTouches?t.changedTouches[0].pageX:t.pageX,t.changedTouches?t.changedTouches[0].pageY:t.pageY),this.scrollEvent=this._scroll.bind(this),this.element.addEventListener("mousemove",this.scrollEvent),this.element.addEventListener("touchmove",this.scrollEvent),this.scrollStart(t))},LiteScroll.prototype._scroll=function(t){t.preventDefault();var e=this.calcRelativePos(t.changedTouches?t.changedTouches[0].pageX:t.pageX,t.changedTouches?t.changedTouches[0].pageY:t.pageY);if(this.options.scrollX){var i=this.contentRect.width-this.elementRect.width,s=e.x-this.scrollStartVec.x,n=this.prevScrollVec.x+s;this.x=n>0||-i>n?n>0?0:-i:n}if(this.options.scrollY){var o=this.contentRect.height-this.elementRect.height,l=e.y-this.scrollStartVec.y,c=this.prevScrollVec.y+l;this.y=c>0||-o>c?c>0?0:-o:c}this.content.style.transitionDuration="0ms",this.content.style.transform="translate("+this.x+"px, "+this.y+"px) translateZ(0px)",this.scroll(t)},LiteScroll.prototype._scrollEnd=function(t){if(this.options.snap){for(var e=null,i={x:0,y:0},s=0,n=this.content.children.length;n>s;s++){var o=this.content.children[s].getBoundingClientRect(),l=this.calcRelativePos(o.left-this.x,o.top-this.y);l.x=-l.x,l.y=-l.y;var c=this.clacPointDistance(this,l);s?e>c&&(e=c,i=l):(e=c,i=l)}this.x=i.x,this.y=i.y,this.content.style.transitionDuration=this.options.snapSpeed,this.content.style.transitionTimingFunction="cubic-bezier(0.1, 0.57, 0.1, 1)",this.content.style.transform="translate("+this.x+"px, "+this.y+"px) translateZ(0px)"}this.prevScrollVec.x=this.x,this.prevScrollVec.y=this.y,this.element.removeEventListener("mousemove",this.scrollEvent),this.element.removeEventListener("touchmove",this.scrollEvent),this.scrollEvent=null,this.scrollEnd(t)};